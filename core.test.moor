\\ Core tests

vocabulary test
test definitions
vocabulary internal
internal definitions

\\ VAR/VAL decompilation

:: test-var1 111 var
:: test-val1 222 val


\\ Locals

: loc-swap
	( :c :d )
	:c :d
	:c! :d!
	:c :d
	return ;

: loc-swap-test	11 22 || loc-swap <<< = <<< = and if else abort then ;

: loc1	( :c :d ) 1 for :d :c over return ;
: loc21	( :a :b ) :a :b || loc1 <<< = <<< = and if else abort then return ;
: loc22	0 0 ( :a :b :r1 :r2 ) :a :b loc1 :r1! :r2! :r1 :a = :r2 :b = and if else abort then return ;

\\ Stacks

:: test-stack	3 stack

: test->s-ok
	test-stack empty
	1 test-stack >s
	22 test-stack >s
	333 test-stack >s
;
: test->s-overflow
	test->s-ok
	4444 test-stack >s
;
: test->s-underflow
	test-stack empty
	test-stack s> _
;
: test-stack-fetch
;

\\ Public tests

test definitions internal

: test-var-decomp1
	test-var1 @ .
	test-val1 . ;

: test-stack
	TEST" ğŸ“ Stack >S ok"			test->s-ok		?SUCCEEDED
	TEST" ğŸ“ Stack >S overflow"		test->s-overflow	?FAILED
	TEST" ğŸ“ Stack S> underflow"		test->s-underflow	?FAILED
;

: test-locals
	TEST" ğŸ“ SWAP via locals"		loc-swap-test ?SUCCEEDED 
	TEST" ğŸ“ Nested locals 1"		111 222 loc21 ?SUCCEEDED 
	TEST" ğŸ“ Nested locals 1"		111 222 loc22 ?SUCCEEDED 
;

forth definitions

